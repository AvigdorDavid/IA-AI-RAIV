
<!DOCTYPE html>
<html>
<head>
	<title>Automated Emperor</title>
</head>
<body onload="pageLoad()">
	<form id="expacoptions" action="#" method="post" onsubmit="return false">
			<input type="checkbox" name="AgentBlaise" value="AgentBlaise"> Agent Blaise<br>
			<input type="checkbox" name="AllianceSmuggler" value="AllianceSmuggler"> Alliance Smuggler<br>
		<!--Insert more expacs here
		-->

		
  		<button onClick="expacCheck()">Choose</button>
	</form>
	
	<br>

	
	<script type='text/javascript'>
		//SETUP
		//VARS
		var expacCardsList = [];
		//grabs expansion packs form.
		var expacoptions = document.getElementById('expacoptions');
		//blitz cards filenames
		var blitzCards = ["Blitz 1","Blitz 2","Blitz 3","Blitz 4","Blitz 5", "Blitz 6","Blitz 7","Blitz 8","Blitz 9","Blitz 10"];
		var coreImpBelow6Standard = ["ProbeDroid","Stormtrooper","ImpOfficer","EWebEngi","ELImpOfficer","ELProbeDroid"];
		var coreImp6_8Standard = ["RoyalGuard","ELEWebEngi"];
		var coreImp8_12Standard = ["ELStormtrooper","ELRoyalGuard"];
		var coreImpNonUnique12Up = ["AT-ST"];
		var coreScumBelow6Standard = ["Nexu", "ELNexu"];
		var coreScum6_8Standard = ["TrandoshanHunter"];
		var coreScum8_12Standard = ["ELTrandoshanHunter"];
		var coreScumNonUnique12Up = [];
		
		//Difficulty Settings
		//deployment threat level (starts at 2)
		//2-6below; 3-8below; 4-12below; 5+ -all non-unique
		var deploymentDiff = 2;
		
		
		//New deck
		//Load first, then call durstenfeld shuffle
		var deck = [];
		
		//DECK SHUFFLE
		
		//BLITZ DECK MANAGEMENT
		//Starting number of cards
		var startCardNum = 2;
		
		
		//Randomly pick Blitz Cards
		for (var i=0, len=startCardNum; i<startCardNum;i++){
			//10 cards to pick from, randomly picks one
			deck.push("Blitz " + randomCardNumberDraw(1,10));
		}
		
		
		//Load up focus cards
		for (var i=0, len=startCardNum; i<startCardNum;i++){
			//10 cards to pick from, randomly picks one
			deck.push("Blitz " + randomCardNumberDraw(1,10));
		}
		
		function randomCardNumberDraw(min,max){
			//Takes min max integer to randomize from
			return Math.floor(Math.random()*(max-min+1)+min);
		}
		
		//DEPLOYMENT DECK MANAGEMENT
		var deployDeck = [];
		//Copy of shuffled deploy Deck
		//Use when resetting deck to draw
		var savedDeployDeck = [];
		
		//ON PAGE LOAD FUNCTIONS
		function pageLoad(){
			deployDeck = deployDeck.concat(coreImpBelow6Standard);
			deployDeck = deployDeck.concat(coreScumBelow6Standard);
			deployDeck = shuffleArray(deployDeck);
			savedDeployDeck = deployDeck.slice(0);
			document.getElementById('deployDiffInt').innerHTML = deploymentDiff;
			//Test to show shuffled
			//document.getElementById('demo2').innerHTML = deployDeck;
		}
		
		
		
		//END VAR SETUP
		//
		//
		
		//HELPER FUNCTIONS
		//Durstenfeld shuffle
		function shuffleArray(array) {
			for (var i = array.length - 1; i > 0; i--) {
				var j = Math.floor(Math.random() * (i + 1));
				var temp = array[i];
				array[i] = array[j];
				array[j] = temp;
			}
			return array;
		}
		
		//adding image function
		//GENERIC TEMPLATE!!! MODIFY AS NEEDED
		function show_image(src, width, height, alt) {
			var img = document.createElement("img");
			img.src = src;
			img.width = width;
			img.height = height;
			img.alt = alt;

			// This next line will just add it to the <body> tag
			document.body.appendChild(img);
		}
		
		//IMAGE REPLACE
		//replaces an img ALREADY on the page, by page id
		function replace_image(src, width, height, alt, pageID) {
			img = document.getElementById(String(pageID));
			img.src = src;
			img.width = width;
			img.height = height;
			img.alt = alt;

		}
		//END HELPER FUNCTIONS
		
		//MAIN BODY
		//
		//responds to click from submit button
		function expacCheck(){
			//checks which checkboxes are clicked
			//
			//Resets to blank list
			expacCardsList = [];
			for (var i=0, len=expacoptions.length; i<len; i++) {
		    	if ( expacoptions[i].type === 'checkbox' ) {
					if (expacoptions[i].checked) {
						expacCardsList.push(expacoptions[i].value);
					}
				}
			}
			document.getElementById('demo').innerHTML = expacCardsList;
		}
		
		//DEPLOYMENT SECTION
		//responds to deployment display click
		function displayDeploymentCards(){
			//checks to see if there is something left in deck
			if (deployDeck[0]){
				var poppedItem = String(deployDeck.pop());
				var imgSrc = "files/Deployment/Core/" + poppedItem + ".jpg";
				document.getElementById('demo2').innerHTML = deployDeck;
				replace_image(imgSrc, 335, 523, imgSrc, "deployImg");
			}
		}
		
		//reshuffles deployment cards using saved copy
		function shuffleDeploymentCards(){
			savedDeployDeck = shuffleArray(savedDeployDeck);
			deployDeck = savedDeployDeck.slice(0);
			document.getElementById('demo2').innerHTML = deployDeck;
		}
		
		//increase deployment difficulty
		//calls reshuffle and adds required cards
		function deploymentInc(){
			deploymentDiff = deploymentDiff + 1;
			readjustDiff();
			document.getElementById('deployDiffInt').innerHTML = deploymentDiff;
			document.getElementById('demo2').innerHTML = deployDeck;
		}
		
		//decrease deployment difficulty
		//calls reshuffle and adds required cards
		function deploymentDec(){
			if (deploymentDiff > 2){
				deploymentDiff = deploymentDiff - 1 ;
				readjustDiff();
				document.getElementById('deployDiffInt').innerHTML = deploymentDiff;
				document.getElementById('demo2').innerHTML = deployDeck;
			}
		}
		
		function readjustDiff(){
			if (deploymentDiff >= 2) {
				//reset deployDeck
				deployDeck = [];
				deployDeck = deployDeck.concat(coreImpBelow6Standard);
				deployDeck = deployDeck.concat(coreScumBelow6Standard);
				addDeployNonCore2Threat();
			}
			
			if (deploymentDiff >= 3){
				deployDeck = deployDeck.concat(coreImp6_8Standard);
				deployDeck = deployDeck.concat(coreScum6_8Standard);
				addDeployNonCore3Threat();
			
			
			}
			
			if (deploymentDiff >= 4){
				deployDeck = deployDeck.concat(coreImp8_12Standard);
				deployDeck = deployDeck.concat(coreScum8_12Standard);
				addDeployNonCore4Threat();
			
			
			}
			
			//5 is max
			if (deploymentDiff >= 5){
				deployDeck = deployDeck.concat(coreImpNonUnique12Up);
				deployDeck = deployDeck.concat(coreScumNonUnique12Up);
				addDeployNonCore5Threat();
			
			
			}
			
			deployDeck = shuffleArray(deployDeck);
			savedDeployDeck = deployDeck.slice(0);
			
		}
		
		//Add expacs 2 threat deployment cards
		function addDeployNonCore2Threat(){
		
		}
		
		//Adds expacs 3 threat deployment cards
		function addDeployNonCore3Threat(){
		
		}
		
		function addDeployNonCore4Threat(){
		
		}
		
		function addDeployNonCore5Threat(){
		
		}
		
		//
		//END DEPLOYMENT SECTION
		//
		
		
	</script>

<p id="demo">List to be replaced here</p>
<p id="demo2">List2 to be replaced here</p>

<div id="Deployment">

<h3> Drawn Deployment Card for OPEN GROUP: </h3>

	<form id="deployment" action="#" method="post" onsubmit="return false">
  		<button onClick="displayDeploymentCards()">Draw deployment</button>
	</form>
	
	<form id="deploymentreshuffle" action="#" method="post" onsubmit="return false">
  		<button onClick="shuffleDeploymentCards()">Reshuffle deployment deck</button>
	</form>
	<br>
	
	Adjust deployment difficulty
	
	<p id ="deployDiffInt"> </>
	
	<form id="deploymentDiffInc" action="#" method="post" onsubmit="return false">
  		<button onClick="deploymentInc()">+</button>
	</form>
	<form id="deploymentDiffDec" action="#" method="post" onsubmit="return false">
  		<button onClick="deploymentDec()">-</button>
	</form>
	<br>

<img id="deployImg">
</img>

</div>

</body>

</html>
